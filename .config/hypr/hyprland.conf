# Gemto Hyprland Config
#################
### AUTOSTART ###
#################

# exec-once = hyprpm reload
exec-once = hyprlock-wrapper # wrapper for crash recovery
exec-once = systemctl --user set-environment XDG_CURRENT_DESKTOP=hyprland
exec-once = systemctl --user import-environment DISPLAY SWAYSOCK WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = dbus-update-activation-environment --all
exec-once = /usr/libexec/polkit-mate-authentication-agent-1
exec-once = keychain ~/.ssh/git ~/.ssh/oracle --systemd
exec-once = hyprpaper 
exec-once = hypridle
exec-once = fish -c "while true; waybar; end" # Shit ass bar
exec-once = fish -c "while true; wl-paste --watch cliphist store; end" # Shit ass clipboard management
exec-once = dunst -conf .config/dunst/dunstrc
exec-once = kdeconnectd
exec-once = keychain
exec-once = dssd
exec-once = kdeconnect-indicator
exec-once = nm-applet
exec-once = blueman-applet
exec-once = systemctl --user start sunshine

#############################
### ENVIRONMENT VARIABLES ###
#############################
env = GOBIN,/home/maaki/.local/bin
env = PATH,$PATH:/home/maaki/.local/bin:/home/maaki/.cargo/bin
env = GOPATH,/home/maaki/.go
env = SLURP_ARGS,"-c 0e6099ff -b 1a1a1a11"
env = QT_QPA_PLATFORM,wayland;xcb
env = QT_QPA_PLATFORMTHEME,qt6ct
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
env = XDG_SESSION_TYPE,wayland
env = ELECTRON_OZONE_PLATFORM_HINT,wayland
env = XCURSOR_SIZE,24
env = XCURSOR_THEME,Adwaita
env = HYPRCURSOR_THEME,Adwaita
env = HYPRCURSOR_SIZE,24
env = GRIMBLAST_EDITOR,com.github.maoschanz.drawing
env = MANGOHUD_CONFIGFILE,/home/maaki/.config/MangoHud/MangoHud.conf

#############
### INPUT ###
#############

input {
    kb_layout = us
    kb_variant =
    kb_model =
    kb_options =
    kb_rules =

    numlock_by_default = true

    follow_mouse = 1

    touchpad {
        disable_while_typing = true
        natural_scroll = true
        disable_while_typing = true
    }

    sensitivity = 0 # -1.0 - 1.0, 0 means no modification.
}


#####################
### LOOK AND FEEL ###
#####################

misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
}

monitor = HDMI-A-1, 1920x1080@74.97, 0x0, 1, vrr, 1 

general {
    gaps_in = 5
    gaps_out = 10
    border_size = 2
    col.active_border = 0xffcba6f7
    col.inactive_border = 0xff313244
    no_border_on_floating = true
    layout = dwindle
    resize_on_border = true
}

animations {
    enabled = true
    bezier = myBezier, 0.05, 0.9, 0.1, 1.05
    animation = windows, 1, 7, myBezier
    animation = windowsOut, 1, 7, default, popin 80%
    animation = border, 1, 10, default
    animation = borderangle, 1, 8, default
    animation = fade, 1, 7, default
    animation = workspaces, 1, 6, default
}

dwindle {
    pseudotile = true # master switch for pseudotiling. Enabling is boun>
    preserve_split = true # you probably want this
}

gestures {
    workspace_swipe = true
}

general {
    col.active_border = rgb(268bd2)
    col.inactive_border = rgb(1a1a1a)

}

general:allow_tearing = true
render:direct_scanout = true
misc:anr_missed_pings = 20

##############################
### WINDOWS AND WORKSPACES ###
##############################
  windowrule = float, title:Open File
  windowrule = float, class:xdg-desktop-portal-gtk
  windowrule = float, title:branchdialog
  windowrule = float, title:Waydroid
  windowrule = float, class:(file-roller)
  windowrule = float, class:(org.gnome.Calculator)
  windowrule = move 1541 421, class:(org.gnome.Calculator)
  windowrule = size 360 612, class:(org.gnome.Calculator)
  windowrule = float, class:(*.exe)
  windowrule = float, title:^(SteamTinkerLaunch)(.*)$
  windowrule = center, class:(steam), title:(Shutdown)
  windowrule = center, class:(hyprland-share-picker)
  windowrule = float, class:(hyprland-share-picker)
  windowrule = size 500 290, class:(hyprland-share-picker)
  windowrule = idleinhibit focus, class:(mpv)
  windowrule = idleinhibit fullscreen, title:(Mozilla Firefox)
  windowrule = idleinhibit focus, class:(com.stremio.stremio)
  windowrule = float, title:^(Media viewer)$
  windowrule = float, title:^(Volume Control)$
  windowrule = float, title:^(Picture-in-Picture)$
  windowrule = float, title:^(Firefox — Sharing Indicator)$
  windowrule = move 0 0, title:^(Firefox — Sharing Indicator)$
  windowrule = float, class:(pulsemixer)
  windowrule = size 658 594, class:pulsemixer
  windowrule = move 1251 459, class:pulsemixer
  windowrule = float, title:(File Operation Progress), class: Thunar
  windowrule = float, title:^(Rename.*), class: Thunar
  windowrule = move 1298 943, title:(File Operation Progress), class: Thunar
  windowrule = size 610 95, title:(File Operation Progress), class: Thunar
  windowrule = float, class:(org.gnome.FileRoller),title:(Extract)
  # windowrule = move 1297 879, class:(org.gnome.FileRoller),title:(Extract)
  # windowrule = size 610 161, class:(org.gnome.FileRoller),title:(Extract)
  windowrule = fullscreen, class:(org.telegram.desktop),title:(Media viewer)
  windowrule = noblur, xwayland:1, floating:1 
  windowrule = noblur, class:(org.kde.kdeconnect.daemon),title:(KDE Connect Daemon)
  windowrule = float, class:(org.kde.kdeconnect.daemon)
  windowrule = float, class:(org.kde.kdeconnect.*)
  windowrule = suppressevent fullscreen, class:(org.kde.kdeconnect.daemon)
  windowrule = pin, class:(org.kde.kdeconnect.daemon)
  windowrule = size 1920 1080, class:(org.kde.kdeconnect.daemon)
  $games = ^(steam_app_.*|steam_proton|streaming_client|gamescope|xonotic-sdl|xonotic-glx)$
  windowrule = immediate, class: $games
  windowrule = fullscreen, class: $games
  windowrule = idleinhibit always, class: $games
  
###################
### KEYBINDINGS ###
###################

# See https://wiki.hyprland.org/Configuring/Keywords/
$mainMod = SUPER # Sets "Windows" key as main modifier

# bind = $mainMod, Q, overview:toggle
# bind = $mainMod, Q, hyprexpo:expo, toggle
bind = $mainMod, RETURN, exec, kitty
bind = $mainMod, Menu, exec, xdg-open http://
bind = $mainMod, Z, exec, tofi-drun --prompt-text "App: " | xargs hyprctl dispatch exec -- 
bind = $mainMod, D, exec, tofi-run --prompt-text "Run: " | xargs hyprctl dispatch exec -- 
bind = $mainMod SHIFT, Q, killactive,
bind = $mainMod SHIFT, P, pseudo,
bind = $mainMod, SPACE, togglefloating,
bind = $mainMod, Z, exec, $menu
bind = $mainMod, F, fullscreen
bind = $mainMod, E, swapsplit, # dwindle
bind = $mainMod, R, togglesplit, # dwindle
bind = $mainMod, L, exec, loginctl lock-session
bind = $mainMod, V, exec, cliphist-menu
bind = $mainMod, N, exec, dunst-menu

# Move focus with mainMod + arrow keys
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

# Switch workspaces with mainMod + [1,2]
bind = $mainMod, 1, workspace, -1
bind = $mainMod, 2, workspace, +1

# Move active window to a workspace with mainMod + SHIFT + [1,2]
bind = $mainMod SHIFT, 1, movetoworkspace, -1
bind = $mainMod SHIFT, 2, movetoworkspace, +1


# # Example special workspace (scratchpad)
# bind = $mainMod, S, togglespecialworkspace, magic
# bind = $mainMod SHIFT, S, movetoworkspace, special:magic

# Scroll through existing workspaces with mainMod + scroll
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Laptop multimedia keys for volume and LCD brightness
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindel = ,XF86MonBrightnessUp, exec, brightnessctl s 10%+
bindel = ,XF86MonBrightnessDown, exec, brightnessctl s 10%-
bind = ,XF86Calculator, exec, org.gnome.Calculator

# Requires playerctl
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioPrev, exec, playerctl previous

# screenshots 
bind = $mainMod SHIFT, S, exec, grimblast --notify copy area
bind = $mainMod ALT, S, exec, grimblast --notify copy area
bind = $mainMod SHIFT, F, exec, grimblast --notify copy output
bind = $mainMod SHIFT, A, exec, grimblast --notify copy active
